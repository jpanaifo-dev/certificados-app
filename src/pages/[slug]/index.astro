---
import Certificado from "@/components/Certificado.astro";
import { LayoutCommon } from "../../layouts";
import userData from "../../data/users.json";
import PdfGenerator from "@/components/react/PdfGenerator";

const { slug } = Astro.params;

type userInterface = (typeof userData.users)[0];

const user = userData.users.find((user: userInterface) => user.dni === slug);

console.log("user", user);
---

<LayoutCommon
  title="Obtén tu certificado"
  description="Obtén tu certificado de aprobación de los cursos de la Escuela de Postgrado de la UNAP."
>
  <PdfGenerator client:only="react">
    {
      user ? (
        <div class="w-[297mm] h-[210mm] relative bg-gray-200">
          <Certificado
            title="Obtén tu certificado"
            description="Obtén tu certificado de aprobación de los cursos de la Escuela de Postgrado de la UNAP."
            userdata={user}
          />
        </div>
      ) : (
        <p>No se encontró ningún usuario con el DNI {slug}.</p>
      )
    }
  </PdfGenerator>
</LayoutCommon>
